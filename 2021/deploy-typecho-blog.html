













<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>💻【环境搭建】基于 Docker 搭建 Typecho 博客系统 [ 隐秀 ]</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-one-light.min.css">
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  

  <link rel="stylesheet" href="/css/third_party/utilities.min.css">
  <link rel="stylesheet" href="/css/star.css">
<meta name="generator" content="Hexo 6.1.0"></head>
<body>

<main class="page-content" aria-label="Content">
  

  <div class="wrapper">
    
    
  <article 
    class="post h-entry"
    id="post"
    itemscope
    itemtype="http://schema.org/BlogPosting"
  >

  <header class="post-header">
    <div class="post-back">
      <a class="black-link" href="/">
        ← Home
      </a>
    </div>

    <h1 class="post-title p-name" itemprop="name headline">
      💻【环境搭建】基于 Docker 搭建 Typecho 博客系统
    </h1>
    <p class="post-meta">
      <time
        class="dt-published"
        datetime="1626241249000"
        itemprop="datePublished"
      >
        Jul 14, 2021
      </time>•
      <span itemprop="author" itemscope itemtype="http://schema.org/Person"
        ><span class="p-author h-card" itemprop="name"
          >seriouszyx</span
        ></span
      >
        <span class="busuanzi_container_page">
          <span id="busuanzi_container_page_pv">
            •
          <span id="busuanzi_value_page_pv"></span> View
          </span>
        </span>
      
    </p>
  </header>

  <div class="js-toc"></div>

  <div class="post-content" itemprop="articleBody">
    <h2 id="云服务器"><a href="#云服务器" class="headerlink" title="云服务器"></a>云服务器</h2><p>首先一般搭建动态博客都会有一个云服务器，国内的话供应商一般是阿里云或者腾讯云，我这里使用的是腾讯云，基本的操作逻辑大同小异。</p>
<p>下面是我服务器的配置信息。</p>
<p><img src="https://img.seriouszyx.com/20210714235652.png#vwid=1646&amp;vhei=876"></p>
<h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><h3 id="yum-换源"><a href="#yum-换源" class="headerlink" title="yum 换源"></a>yum 换源</h3><p>首先将 yum 进行换源处理，以获得更快的下载速度。备份 <code>CentOS-Base.repo</code> 文件，以便更改配置文件出错恢复默认。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>之后下载新的 <code>CentOS-Base.repo</code> 到 <code>/etc/yum.repos.d</code> 。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>根据自己服务器的版本下载相应的配置文件，比如机器的操作系统是 CentOS7，就把下载链接最后的部分改为 <code>CentOS-7.repo</code> 。</p>
<p>下载成功后运行 <code>yum makecache</code> 生成缓存即可，这样使用 yum 下载软件包时访问的就是阿里的镜像，速度会快很多。</p>
<h3 id="安装-Docker-1"><a href="#安装-Docker-1" class="headerlink" title="安装 Docker"></a>安装 Docker</h3><p>在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库，之后就可以从仓库安装和更新 Docker。</p>
<p>先安装所需的软件包，<code>yum-utils</code> 提供了 yum-config-manager ，并且 device mapper 存储驱动程序需要 <code>device-mapper-persistent-data</code> 和 <code>lvm2</code>。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>使用以下命令来设置稳定的仓库，国内的阿里源会加快下载速度。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>安装最新版本的 <code>Docker Engine-Community</code> 和 <code>containerd</code>。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y docker-ce docker-ce-cli containerd.io<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>安装后输入 <code>serivce docker status</code>  查看 Docker 运行状态，如下所示即正常运行。</p>
<p><img src="https://img.seriouszyx.com/20210714235730.png#vwid=1695&amp;vhei=426"></p>
<h3 id="Docker-换源"><a href="#Docker-换源" class="headerlink" title="Docker 换源"></a>Docker 换源</h3><p>修改镜像配置文件。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/docker/daemon.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>添加国内源。</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token string">"https://docker.mirrors.ustc.edu.cn"</span><span class="token punctuation">,</span>
       <span class="token string">"http://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>
       <span class="token string">"https://registry.docker-cn.com"</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>使用 <code>service docker restart</code> 命令重启 Docker 服务后生效。</p>
<h2 id="安装-Typecho-依赖环境"><a href="#安装-Typecho-依赖环境" class="headerlink" title="安装 Typecho 依赖环境"></a>安装 Typecho 依赖环境</h2><p>所有容器依赖的一些数据都放在 <code>/data</code> 目录下，包括数据库、网站源码、Nginx 的 conf 等，目的是为了以后迁移方便，直接将 <code>/data</code> 拷贝到新服务器就可以。</p>
<h3 id="安装数据库-MySQL"><a href="#安装数据库-MySQL" class="headerlink" title="安装数据库 MySQL"></a>安装数据库 MySQL</h3><p>使用 Docker 安装 MySQL5.7，注意密码项的自定义修改。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d -p <span class="token number">3306</span>:3306 -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>password --mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,source<span class="token operator">=</span>/data/mysql,target<span class="token operator">=</span>/var/lib/mysql --restart<span class="token operator">=</span>always --name mysql5.7 mysql:5.7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><code>--mount</code> 命令也可以用 <code>-v /data/mysql:/var/lib/mysql</code> 代替，官方更推荐使用 <code>--mount</code>，详情请看<a target="_blank" rel="noopener" href="https://docs.docker.com/storage/bind-mounts/">官网</a>。</p>
<p>对于 <code>docker run</code> 命令的部分参数说明：</p>
<ul>
<li>-d 代表 daemon，即后台运行。</li>
<li>-p 是映射容器的 3306 端口到宿主机的 3306 端口，规则是：<code>-p IP:host_port:container_port</code> 。</li>
<li>-e 是设置 MySQL 的密码。</li>
<li>–mount 是让容器的 <code>/var/lib/mysql</code> 映射到宿主机的 <code>/data/mysql</code> 目录中。</li>
<li>–restart=always 是为了在 Docker 重启时，容器能够自动启动。</li>
</ul>
<h3 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -p <span class="token number">80</span>:80 -p <span class="token number">443</span>:443 --mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,source<span class="token operator">=</span>/data/nginx/conf.d,target<span class="token operator">=</span>/etc/nginx/conf.d --mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,source<span class="token operator">=</span>/data/solution,target<span class="token operator">=</span>/data/solution --restart<span class="token operator">=</span>always -d --name nginx nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><code>--mount type=bind,source=/data/nginx/conf.d,target=/etc/nginx/conf.d</code> 是为了将 Nginx 的配置目录映射到宿主机的目录中，这样当 Nginx 容器被销毁时，依然能保留配置。</li>
<li><code>/data/solution</code> 用于存放网站项目，也是为了数据与容器分离。</li>
<li>-d 这里同时映射了 80 和 443 端口。</li>
</ul>
<h3 id="安装-PHP"><a href="#安装-PHP" class="headerlink" title="安装 PHP"></a>安装 PHP</h3><p>可以在 PHP 的<a target="_blank" rel="noopener" href="https://hub.docker.com/_/php">官方镜像源</a>找到最新版本的 PHP，在实际使用中，我们可能还需要装一些 PHP 的扩展，而官方源中支持已经帮我们安装了一些扩展的 PHP 镜像，如 <code>php:&lt;version&gt;-fpm</code>，其中的 <code>&lt;version&gt;</code> 指的是 PHP 版本，具体可以从官方镜像源找到。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run --name php-fpm -p <span class="token number">9000</span>:9000 --mount <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,source<span class="token operator">=</span>/data/solution,target<span class="token operator">=</span>/data/solution --restart<span class="token operator">=</span>always -d php:7.4-fpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>这里也将网站根目录 <code>/data/solution</code> 映射到 PHP 容器中，为了 PHP 能正确读取 Nginx 中的 root 配置项。 </p>
<p>由于 Typecho 需要用到 <code>pdo_mysql</code> 扩展，因此要在 <code>php-fpm</code> 上安装这个扩展。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 进入到`php-fpm`容器内部</span>
docker <span class="token builtin class-name">exec</span> -it php-fpm <span class="token function">bash</span>
<span class="token comment"># 安装扩展</span>
docker-php-ext-install pdo_mysql
<span class="token comment"># 查看是否已经成功安装</span>
php -m
<span class="token comment"># 退出容器</span>
<span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>安装后重启 <code>php-fpm</code>，<code>pdo_mysql</code> 则安装成功。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker restart php-fpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="自定义-Bridge-网络"><a href="#自定义-Bridge-网络" class="headerlink" title="自定义 Bridge 网络"></a>自定义 Bridge 网络</h2><p>执行命令看一下，现在机器上已经运行着 Nginx、PHP、MySQL 三个服务，现在需要让它们之间能够相互通信，这里使用自定义 Bridge 网络的方法。</p>
<p><img src="https://img.seriouszyx.com/20210714235804.png#vwid=1377&amp;vhei=99"></p>
<p>实际上启动容器时，Docker 会将容器绑定到默认的 Bridge 网络中，使用 <code>docker network inspect bridge</code> 命令打印此时默认的网络：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"typecho"</span><span class="token punctuation">,</span>
        <span class="token property">"Id"</span><span class="token operator">:</span> <span class="token string">"d9d06a7e7410e75183eb09019bb895a12a01d2f7405f80e09d40811c578ff396"</span><span class="token punctuation">,</span>
        <span class="token property">"Created"</span><span class="token operator">:</span> <span class="token string">"2021-06-11T13:10:53.453912588+08:00"</span><span class="token punctuation">,</span>
        <span class="token property">"Scope"</span><span class="token operator">:</span> <span class="token string">"local"</span><span class="token punctuation">,</span>
        <span class="token property">"Driver"</span><span class="token operator">:</span> <span class="token string">"bridge"</span><span class="token punctuation">,</span>
        <span class="token property">"EnableIPv6"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">"IPAM"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"Driver"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
            <span class="token property">"Options"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"Config"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">"Subnet"</span><span class="token operator">:</span> <span class="token string">"172.18.0.0/16"</span><span class="token punctuation">,</span>
                    <span class="token property">"Gateway"</span><span class="token operator">:</span> <span class="token string">"172.18.0.1"</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"Internal"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">"Attachable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">"Ingress"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">"ConfigFrom"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"Network"</span><span class="token operator">:</span> <span class="token string">""</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"ConfigOnly"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">"Containers"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"2d4b9daf908252e40b8cca8e772e9dece8c1c36a467f2846fc0786d4964817cd"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"mysql5.7"</span><span class="token punctuation">,</span>
                <span class="token property">"EndpointID"</span><span class="token operator">:</span> <span class="token string">"8afe4a42884234acda9c8b996faed20d98015e6c919455edaf0d24f63bc22764"</span><span class="token punctuation">,</span>
                <span class="token property">"MacAddress"</span><span class="token operator">:</span> <span class="token string">"02:42:ac:12:00:02"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv4Address"</span><span class="token operator">:</span> <span class="token string">"172.18.0.2/16"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv6Address"</span><span class="token operator">:</span> <span class="token string">""</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"8cd032a4eeff30e7a54d81b6f92449160b243c793ba9d1a239cb4587896f2721"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"php-fpm"</span><span class="token punctuation">,</span>
                <span class="token property">"EndpointID"</span><span class="token operator">:</span> <span class="token string">"211aa7e5ab248aee84cc7875b76842037e1c597eb3f5b546b3705ac971c52c0a"</span><span class="token punctuation">,</span>
                <span class="token property">"MacAddress"</span><span class="token operator">:</span> <span class="token string">"02:42:ac:12:00:04"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv4Address"</span><span class="token operator">:</span> <span class="token string">"172.18.0.4/16"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv6Address"</span><span class="token operator">:</span> <span class="token string">""</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"ff4b411e355f1000552b892601164499a0c077fdd4a8eb22bb8c5e92f0757d83"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"nginx"</span><span class="token punctuation">,</span>
                <span class="token property">"EndpointID"</span><span class="token operator">:</span> <span class="token string">"e10b908ac0e0f6bd872a0b23d7ff30f58845700b7fe48568325d73ad38ba1747"</span><span class="token punctuation">,</span>
                <span class="token property">"MacAddress"</span><span class="token operator">:</span> <span class="token string">"02:42:ac:12:00:03"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv4Address"</span><span class="token operator">:</span> <span class="token string">"172.18.0.3/16"</span><span class="token punctuation">,</span>
                <span class="token property">"IPv6Address"</span><span class="token operator">:</span> <span class="token string">""</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"Options"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"Labels"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以看到 MySQL、php-fpm、Nginx 在默认 Bridge 中的 IP 分别是 <code>172.18.0.2</code>、<code>172.18.0.4</code>、<code>172.18.0.3</code>，  可以通过容器在宿主机中的 IP 来访问对应的服务，比如 php-fpm 想要访问 MySQL，可以在 php-fpm 容器中通过 <code>172.18.0.2:3306</code> 来访问。</p>
<p>这种方式只能使用 IP 来访问对应的容器的服务，而 IP 可能会变化的，因此是不推荐使用在生产环境的。而用户自定义的 Bridge 网络，不仅支持 IP 访问，还支持直接使用容器名称访问。</p>
<p>创建一个自定义 Bridge 网络，假设名称是 <code>typecho</code>。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker network create typecho<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>通过 <code>docker network connect ${网络名} ${容器名}</code> 来将容器绑定到 <code>typecho</code> 网络上。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker network connect typecho mysql5.7
docker network connect typecho php-fpm
docker network connect typecho nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>现在三个容器已经绑定到自定义的 Bridge 网络上了。例如，在 Nginx 容器中，就可以直接通过 <code>php-fpm</code> 的名字来调用 PHP 的服务了。</p>
<h2 id="安装-Typecho"><a href="#安装-Typecho" class="headerlink" title="安装 Typecho"></a>安装 Typecho</h2><p>进入 MySQL 容器创建数据库 <code>typecho</code> 。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker <span class="token builtin class-name">exec</span> -it mysql5.7 <span class="token function">bash</span>
mysql -uroot -p 
输入密码
create database typecho<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>进入 Typecho 官方<a target="_blank" rel="noopener" href="https://typecho.org/download">下载页面</a>，发现分为<code>稳定版</code>和<code>开发版</code>两种，按照一般的软件安装思路，当然是选择稳定版，但是 Typecho 的稳定版在 2017 年后就没有更新了，会遇到许多问题，比如我之前的安装中就遇到了<a target="_blank" rel="noopener" href="https://github.com/typecho/typecho/issues/683">此类错误</a> ，随后切换至开发版后问题解决。</p>
<p>复制开发版的下载链接，下载到服务器的 <code>/data</code> 目录下并解压到 <code>/solution</code> 目录下。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://nightly.link/typecho/typecho/workflows/Typecho-dev-Ci/master/typecho_build.zip 

<span class="token function">unzip</span> typecho_build.zip -d ./solution/typecho<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>然后配置 Nginx 使得网站可以正常访问。注意其中 Nginx 要访问 php-fpm，在配置文件中可通过名字访问其 Docker 容器。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">{</span>
	listen <span class="token number">80</span><span class="token punctuation">;</span>
	server_name localhost<span class="token punctuation">;</span>
	root   /data/solution/typecho<span class="token punctuation">;</span>   <span class="token comment"># 这里是网站的存放路径</span>
  index  index.php<span class="token punctuation">;</span>

	<span class="token comment"># 下面直接照写</span>
	location / <span class="token punctuation">{</span>
    	try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.php<span class="token variable">$is_args</span><span class="token variable">$args</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	location ~ <span class="token punctuation">\</span>.php$ <span class="token punctuation">{</span>
        include fastcgi.conf<span class="token punctuation">;</span>
        include fastcgi_params<span class="token punctuation">;</span>
        fastcgi_pass php-fpm:9000<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>配置成功后重启 Nginx 容器，访问服务器的 IP 地址，开始配置 Typecho 博客系统。</p>
<p><img src="https://img.seriouszyx.com/20210714235847.png#vwid=1920&amp;vhei=946"></p>
<p>数据库适配器选择安装好的 <code>pdo-mysql</code> ，因为已经配置了自定义 Bridge 网络，数据库地址填入容器名即可访问数据库。</p>
<p><img src="https://img.seriouszyx.com/20210714235921.png#vwid=1920&amp;vhei=2145"></p>
<p>完成配置信息后会显示如下界面，需要复制文本框中的内容，然后创建 <code>config.inc.php</code> 文件粘贴进去。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /data/solution/typecho/config.inc.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="https://img.seriouszyx.com/20210714235946.png#vwid=1920&amp;vhei=781"></p>
<p>最终会显示安装成功页面，并可以查看默认的用户名和密码。</p>
<p><img src="https://img.seriouszyx.com/20210715000019.png#vwid=1920&amp;vhei=944"></p>
<p>下面两个链接分别是博客页面和后台控制面板。</p>
<p><img src="https://img.seriouszyx.com/20210715000053.png#vwid=1920&amp;vhei=1015"></p>
<p><img src="https://img.seriouszyx.com/20210715000124.png#vwid=1920&amp;vhei=950"></p>
<p>Typecho 博客系统至此安装完成。</p>
<hr>
<ol>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000021390958">Centos8 使用 docker 迁移 typecho 博客</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wudinaniya/article/details/105758739">将 CentOS 的 yum 源更换为国内镜像源</a></li>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/centos-docker-install.html">CentOS Docker 安装</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.dongxing.xin/pages/b1c12d/#php-%E5%AE%89%E8%A3%85">Typecho 环境配置和博客搭建</a></li>
</ol>

  </div>
  </article>

  <div id="paginator">
    
  </div>

  </div>

</main>

<footer class="site-footer h-card">
  
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <ul class="contact-list">
          <li class="p-name"><a class="black-link" href="/">
                seriouszyx 
              </a></li></ul>
      </div>
    </div>
  </div>
  
    <div class="text-center">
      
        <span class="text-gray-300 text-sm" id="busuanzi_container_site_pv">
          本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
      
      
        <span class="text-gray-300 text-sm">•</span>
      
      
          <span class="text-gray-300 text-sm" id="busuanzi_container_site_uv">
            本站访客数<span id="busuanzi_value_site_uv"></span>人次
          </span>
      
    </div>
  
  
    <div class="text-center">
      <a class="text-gray-300 text-sm" target="_blank" rel="noopener" href="https://beian.miit.gov.cn">辽ICP备19014015号</a>
    </div>
  
</footer>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


  <script async src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js">
</script>


  <script src="https://cdn.jsdelivr.net/npm/tocbot@4.18.2/dist/tocbot.min.js"></script>

<script>
  var Star = window.Star || {};
  var CONFIG = {
    fancybox: true,
    tocbot: true
  };
  window.CONFIG = CONFIG;
</script>
<script src="/js/utils.js"></script>
<script src="/js/star.js"></script>

</body>
</html>
