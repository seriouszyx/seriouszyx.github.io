<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="ğŸªœã€CI/CDã€‘å¦‚ä½•å‘å¸ƒ Java åŒ…åˆ° Maven ä¸­å¤®ä»“åº“" />
<meta name="author" content="éšç§€" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="å‰è¨€" />
<meta property="og:description" content="å‰è¨€" />
<link rel="canonical" href="https://blog.seriouszyx.com/2021/publish-to-maven.html" />
<meta property="og:url" content="https://blog.seriouszyx.com/2021/publish-to-maven.html" />
<meta property="og:site_name" content="seriouszyxâ€™ Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-16T14:39:08+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ğŸªœã€CI/CDã€‘å¦‚ä½•å‘å¸ƒ Java åŒ…åˆ° Maven ä¸­å¤®ä»“åº“" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"éšç§€"},"dateModified":"2021-10-16T14:39:08+00:00","datePublished":"2021-10-16T14:39:08+00:00","description":"å‰è¨€","headline":"ğŸªœã€CI/CDã€‘å¦‚ä½•å‘å¸ƒ Java åŒ…åˆ° Maven ä¸­å¤®ä»“åº“","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.seriouszyx.com/2021/publish-to-maven.html"},"url":"https://blog.seriouszyx.com/2021/publish-to-maven.html"}</script>
<!-- End Jekyll SEO tag -->
<!-- local css -->
  <link rel="stylesheet" href="https://blog.seriouszyx.com/assets/css/main.css" />
  <link rel="shortcut icon" type="image/x-icon" href="/./favicon.ico" />
  <link rel="stylesheet" href="https://blog.seriouszyx.com/assets/css/grayscale.css" />
  <!-- docsearch -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" />
  <!-- utils -->
  <link href="https://unpkg.com/tailwindcss@^2/dist/utilities.min.css" rel="stylesheet">
</head>
<body>
    <main class="page-content" aria-label="Content">
        <div class="wrapper">
            <article
  class="post h-entry"
  id="post"
  itemscope
  itemtype="http://schema.org/BlogPosting"
>
  <head>
    <title>ğŸªœã€CI/CDã€‘å¦‚ä½•å‘å¸ƒ Java åŒ…åˆ° Maven ä¸­å¤®ä»“åº“</title>
  </head>
  <header class="post-header">
    <div class="post-back">
      <a class="black-link" href="https://blog.seriouszyx.com">
        â† Home
      </a>
    </div>

    <h1 class="post-title p-name" itemprop="name headline">
      ğŸªœã€CI/CDã€‘å¦‚ä½•å‘å¸ƒ Java åŒ…åˆ° Maven ä¸­å¤®ä»“åº“
    </h1>
    <p class="post-meta">
      <time
        class="dt-published"
        datetime="2021-10-16T14:39:08+00:00"
        itemprop="datePublished"
      >Oct 16, 2021
      </time><span class="busuanzi_container_page">
        <span id="busuanzi_container_page_pv">
          â€¢
          <span id="busuanzi_value_page_pv"></span> View
        </span>
      </span>
    </p>
  </header>

  



<ul>
  <li><a href="#å‰è¨€">å‰è¨€</a></li>
  <li><a href="#å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</a>
    <ul>
      <li><a href="#coordinates">Coordinates</a></li>
      <li><a href="#gpg">GPG</a></li>
    </ul>
  </li>
  <li><a href="#åœ¨-sonatype-åˆ›å»º-issue">åœ¨ Sonatype åˆ›å»º Issue</a></li>
  <li><a href="#é…ç½®å‘å¸ƒä¿¡æ¯">é…ç½®å‘å¸ƒä¿¡æ¯</a>
    <ul>
      <li><a href="#åˆ†å‘ç®¡ç†å’Œè®¤è¯">åˆ†å‘ç®¡ç†å’Œè®¤è¯</a></li>
      <li><a href="#javadoc-å’Œæºä»£ç ">Javadoc å’Œæºä»£ç </a></li>
      <li><a href="#gpg-ç­¾åç»„ä»¶">GPG ç­¾åç»„ä»¶</a></li>
    </ul>
  </li>
  <li><a href="#å‘å¸ƒ">å‘å¸ƒ</a></li>
</ul>


  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="å‰è¨€">å‰è¨€</h2>

<p>æœ€è¿‘å‚ä¸ä¸€äº›å¼€æºé¡¹ç›®ï¼Œæ¶‰åŠåˆ°å‘ç‰ˆç›¸å…³çš„é—®é¢˜ï¼Œæ²¡æœ‰çœ‹åˆ°è¯¦ç»†åˆä¸è¿‡æ—¶çš„æ•™ç¨‹ï¼Œäºæ˜¯è‡ªå·±è°ƒç ”æ‘¸ç´¢ï¼Œæ€»ç»“å‡ºäº†è¿™ç¯‡æ–‡ç« ã€‚</p>

<p>æœ¬æ–‡ä¸»è¦å‚è€ƒ<a href="https://central.sonatype.org/publish/">å®˜æ–¹æ–‡æ¡£</a>è¿›è¡Œç¼–å†™ï¼Œæ¼”ç¤ºä»“åº“ä½äº <a href="https://github.com/seriouszyx/maven-release-example">https://github.com/seriouszyx/maven-release-example</a>ã€‚</p>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>

<h3 id="coordinates">Coordinates</h3>

<p>Maven ç”¨ <strong>groupid</strong> æ¥æ ‡è¯†é¡¹ç›®ç©ºé—´ï¼Œç”¨åŸŸåé€†åºçš„æ–¹å¼å‘½åã€‚ä¸‹é¢æ˜¯ä¸¤ç§å‘½åçš„ä¾‹å­ï¼Œå¦‚æœæœ‰è‡ªå·±çš„åŸŸåï¼Œç›´æ¥ä½¿ç”¨å°±å¯ä»¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨ github ç­‰ä»£ç æ‰˜ç®¡æœåŠ¡çš„åŸŸåã€‚</p>

<ul>
  <li>www.seriouszyx.com -&gt; com.seriouszyx</li>
  <li>github.com/seriouszyx -&gt; io.github.seriouszyx</li>
</ul>

<p>ä¸‹é¢æ˜¯æ”¯æŒä¸ªäºº groupid çš„ä»£ç æ‰˜ç®¡æœåŠ¡ï¼Œå‡è®¾ä½¿ç”¨ <code class="highlighter-rouge">io.github.myusername</code> ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º <strong>OSSRH-TICKETNUMBER</strong> çš„å…¬å¼€ä»“åº“è¿›è¡ŒéªŒè¯ï¼ˆéªŒè¯æˆåŠŸåå¯åˆ é™¤ï¼‰ã€‚å¦‚æœä½¿ç”¨è‡ªå·±çš„åŸŸåï¼Œä¹Ÿéœ€è¦æ·»åŠ  TXT è§£æï¼Œç¨åä¼šæåˆ°ã€‚</p>

<table>
  <thead>
    <tr>
      <th>æœåŠ¡</th>
      <th>groupid</th>
      <th>ç›¸å…³æ–‡æ¡£</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GitHub</td>
      <td>io.github.myusername</td>
      <td><a href="https://pages.github.com/">https://pages.github.com/</a><br /></td>
    </tr>
    <tr>
      <td>GitLab</td>
      <td>io.gitlab.myusername</td>
      <td><a href="https://about.gitlab.com/stages-devops-lifecycle/pages/">https://about.gitlab.com/stages-devops-lifecycle/pages/</a></td>
    </tr>
    <tr>
      <td>Gitee</td>
      <td>io.gitee.myusername</td>
      <td><a href="https://gitee.com/help/articles/4136">https://gitee.com/help/articles/4136</a></td>
    </tr>
    <tr>
      <td>Bitbucket</td>
      <td>io.bitbucket.myusername</td>
      <td><a href="https://support.atlassian.com/bitbucket-cloud/docs/publishing-a-website-on-bitbucket-cloud/">https://support.atlassian.com/bitbucket-cloud/docs/publishing-a-website-on-bitbucket-cloud/</a></td>
    </tr>
    <tr>
      <td>SourceForge</td>
      <td>io.sourceforge.myusername</td>
      <td><a href="https://sourceforge.net/p/forge/documentation/Project%20Web%20Services/">https://sourceforge.net/p/forge/documentation/Project%20Web%20Services/</a></td>
    </tr>
  </tbody>
</table>

<p><strong>artifactId</strong> ç”¨æ¥æ ‡è¯†é¡¹ç›®æœ¬èº«ï¼Œå¦‚æœé¡¹ç›®å‘½åå¾ˆé•¿ï¼Œå¯ä»¥ä½¿ç”¨â€œ-â€æ¥è¿›è¡Œåˆ†éš”ã€‚</p>

<h3 id="gpg">GPG</h3>

<p>å°†ç»„ä»¶å‘å¸ƒåˆ° Maven ä¸­å¤®ä»“åº“éœ€è¦ä½¿ç”¨ <strong>PGP</strong> è¿›è¡Œç­¾åï¼ŒGnuPG ï¼ˆåˆç§° GPGï¼‰ éƒ½æ˜¯ OpenPGP çš„å®ç°ï¼Œéœ€è¦å…ˆåˆ›å»ºä½ è‡ªå·±çš„é”®å€¼å¯¹ï¼Œå†ä¸Šä¼ åˆ°æœåŠ¡å™¨ä»¥ä¾›éªŒè¯ã€‚</p>

<p>ä» <a href="https://gnupg.org/download/index.html#sec-1-2">https//www.gnupg.org/download/</a> ä¸‹è½½å®‰è£…ï¼Œä½¿ç”¨ <code class="highlighter-rouge">--version</code> æ ‡å¿—æ£€æŸ¥ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gpg <span class="nt">--version</span>
gpg <span class="o">(</span>GnuPG<span class="o">)</span> 2.2.28
libgcrypt 1.8.8
Copyright <span class="o">(</span>C<span class="o">)</span> 2021 g10 Code GmbH
License GNU GPL-3.0-or-later &lt;https://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Home: C:/Users/Yixiang Zhao/AppData/Roaming/gnupg
Supported algorithms:
Pubkey: RSA, ELG, DSA, ECDH, ECDSA, EDDSA
Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH,
        CAMELLIA128, CAMELLIA192, CAMELLIA256
Hash: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
Compression: Uncompressed, ZIP, ZLIB, BZIP2
</code></pre></div></div>

<p>å®‰è£…æˆåŠŸåäº§ç”Ÿé”®å€¼å¯¹ï¼Œè¿‡ç¨‹ä¸­éœ€è¦å¡«å†™å§“åã€é‚®ç®±å’Œå¯†ç ï¼Œå¯†é’¥æœ‰æ•ˆæœŸä¸º 2 å¹´ï¼Œåˆ°æ—¶å€™éœ€è¦ä½¿ç”¨å¯†ç å»¶é•¿æœ‰æ•ˆæœŸï¼Œå¯ä»¥çœ‹åˆ°æˆ‘çš„å…¬é’¥ id æ˜¯ <code class="highlighter-rouge">444D548E4E29746B4E2C89FC89985FBD3651A87B</code> ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gpg <span class="nt">--gen-key</span>
gpg <span class="o">(</span>GnuPG<span class="o">)</span> 2.2.28<span class="p">;</span> Copyright <span class="o">(</span>C<span class="o">)</span> 2021 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Note: Use <span class="s2">"gpg --full-generate-key"</span> <span class="k">for </span>a full featured key generation dialog.

GnuPG needs to construct a user ID to identify your key.

Real name: Yixiang Zhao
Email address: seriouszyx@gmail.com
You selected this USER-ID:
    <span class="s2">"Yixiang Zhao &lt;seriouszyx@gmail.com&gt;"</span>

Change <span class="o">(</span>N<span class="o">)</span>ame, <span class="o">(</span>E<span class="o">)</span>mail, or <span class="o">(</span>O<span class="o">)</span>kay/<span class="o">(</span>Q<span class="o">)</span>uit? O
We need to generate a lot of random bytes. It is a good idea to perform
some other action <span class="o">(</span><span class="nb">type </span>on the keyboard, move the mouse, utilize the
disks<span class="o">)</span> during the prime generation<span class="p">;</span> this gives the random number
generator a better chance to gain enough entropy.
We need to generate a lot of random bytes. It is a good idea to perform
some other action <span class="o">(</span><span class="nb">type </span>on the keyboard, move the mouse, utilize the
disks<span class="o">)</span> during the prime generation<span class="p">;</span> this gives the random number
generator a better chance to gain enough entropy.
gpg: key 89985FBD3651A87B marked as ultimately trusted
gpg: directory <span class="s1">'C:/Users/Yixiang Zhao/AppData/Roaming/gnupg/openpgp-revocs.d'</span> created
gpg: revocation certificate stored as <span class="s1">'C:/Users/Yixiang Zhao/AppData/Roaming/gnupg/openpgp-revocs.d\444D548E4E29746B4E2C89FC89985FBD3651A87B.rev'</span>
public and secret key created and signed.

pub   rsa3072 2021-10-14 <span class="o">[</span>SC] <span class="o">[</span>expires: 2023-10-14]
      444D548E4E29746B4E2C89FC89985FBD3651A87B
uid                      Yixiang Zhao &lt;seriouszyx@gmail.com&gt;
sub   rsa3072 2021-10-14 <span class="o">[</span>E] <span class="o">[</span>expires: 2023-10-14]
</code></pre></div></div>

<p>åç»­æ­¥éª¤éœ€è¦é€šè¿‡ä½ çš„å…¬é’¥æ¥è¿›è¡ŒéªŒè¯ï¼Œæ‰€ä»¥æŠŠå®ƒä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ï¼Œæ³¨æ„ <code class="highlighter-rouge">--send-keys</code> åé¢æ˜¯ä½ è‡ªå·±çš„å…¬é’¥ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gpg <span class="nt">--keyserver</span> keyserver.ubuntu.com <span class="nt">--send-keys</span> 444D548E4E29746B4E2C89FC89985FBD3651A87B
gpg: sending key 89985FBD3651A87B to hkp://keyserver.ubuntu.com
</code></pre></div></div>

<p>ç­‰å¤§æ¦‚åå‡ åˆ†é’Ÿï¼ŒéªŒè¯å…¬é’¥æ˜¯å¦å‘å¸ƒæˆåŠŸã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gpg <span class="nt">--keyserver</span> keyserver.ubuntu.com <span class="nt">--recv-keys</span> 444D548E4E29746B4E2C89FC89985FBD3651A87B
gpg: key 89985FBD3651A87B: <span class="s2">"Yixiang Zhao &lt;seriouszyx@gmail.com&gt;"</span> not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
</code></pre></div></div>

<h2 id="åœ¨-sonatype-åˆ›å»º-issue">åœ¨ Sonatype åˆ›å»º Issue</h2>

<p>å¼€å‘è€…è¦æƒ³å°†ç»„ä»¶å‘å¸ƒè‡³ Maven ä¸­å¤®ä»“åº“ï¼Œéœ€è¦å€ŸåŠ©äº Sonatype çš„å¼€æºè½¯ä»¶å­˜å‚¨åº“æ‰˜ç®¡ï¼ˆOpen Source Software Repository Hosting, OSSRHï¼‰æœåŠ¡ã€‚Sonatype ä½¿ç”¨ JIRA æ¥ç®¡ç†è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦å…ˆ<a href="https://issues.sonatype.org/secure/Signup!default.jspa">æ³¨å†Œè´¦å·</a>ã€‚</p>

<p>æ³¨å†Œå¥½ä¹‹åï¼Œå°±å¯ä»¥<a href="https://issues.sonatype.org/secure/CreateIssue.jspa?issuetype=21&amp;pid=10134">åˆ›å»ºä¸€ä¸ªæ–°çš„ Issue</a>ï¼ˆæ–‡æ¡£ä¸­åˆç§° Project ticketï¼‰ï¼Œå¯ä»¥å‚è€ƒæˆ‘åˆ›å»ºçš„æµ‹è¯• Issue <a href="https://issues.sonatype.org/browse/OSSRH-74121">OSSRH-74121</a>ã€‚</p>

<p><img src="https://img.seriouszyx.com/202110161035158.png#vwid=1949&amp;vhei=895" alt="" /></p>

<p>è¿™æ—¶éœ€è¦è¿›è¡Œäººå·¥å®¡æ ¸ï¼Œå°†åˆ†é…çš„ç¼–å· <code class="highlighter-rouge">OSSRH-74121</code> æ·»åŠ åˆ°åŸŸåçš„ TXT è§£æï¼Œæˆ–è€…åœ¨ GitHub ç­‰æ‰˜ç®¡æœåŠ¡ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code class="highlighter-rouge">OSSRH-74121</code> çš„å…¬å¼€åº“ã€‚æˆ‘ç­‰äº†å¤§æ¦‚ä¸€ä¸¤ä¸ªå°æ—¶ï¼Œå°±é€šè¿‡äº†å®¡æ ¸ï¼ŒStatus å˜æˆäº† <code class="highlighter-rouge">RESOLVED</code> ã€‚</p>

<h2 id="é…ç½®å‘å¸ƒä¿¡æ¯">é…ç½®å‘å¸ƒä¿¡æ¯</h2>

<p>æœ¬æ–‡ä½¿ç”¨ Maven ä¸ºä¾‹å‘å¸ƒè‡ªå·±çš„ Java åŒ…ï¼Œå¦‚æœä½¿ç”¨ Gradleã€Ant ç­‰å·¥å…·ï¼Œå¯ä»¥å‚ç…§å®˜æ–¹æ–‡æ¡£ã€‚</p>

<h3 id="åˆ†å‘ç®¡ç†å’Œè®¤è¯">åˆ†å‘ç®¡ç†å’Œè®¤è¯</h3>

<p>åœ¨ <code class="highlighter-rouge">pom.xml</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œä½¿å¾—å¯ä»¥ä½¿ç”¨ Nexus Staging Maven plugin æ’ä»¶å‘ OSSRH Nexus Repository Manager å‘å¸ƒã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;distributionManagement&gt;</span>
  <span class="nt">&lt;snapshotRepository&gt;</span>
    <span class="nt">&lt;id&gt;</span>ossrh<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;url&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/snapshotRepository&gt;</span>
  <span class="nt">&lt;repository&gt;</span>
    <span class="nt">&lt;id&gt;</span>ossrh<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;url&gt;</span>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/distributionManagement&gt;</span>
<span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.sonatype.plugins<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.6.8<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;serverId&gt;</span>ossrh<span class="nt">&lt;/serverId&gt;</span>
        <span class="nt">&lt;nexusUrl&gt;</span>https://s01.oss.sonatype.org/<span class="nt">&lt;/nexusUrl&gt;</span>
        <span class="nt">&lt;autoReleaseAfterClose&gt;</span>true<span class="nt">&lt;/autoReleaseAfterClose&gt;</span>
      <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
    ...
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<p>ä¸‹é¢æ˜¯å‘å¸ƒæ‰€éœ€çš„ JIRA è´¦æˆ·ä¿¡æ¯ï¼Œå†™å…¥åˆ° Maven çš„ <code class="highlighter-rouge">setting.xml</code> æ–‡ä»¶ä¸­ï¼ˆé€šå¸¸ä½äº <code class="highlighter-rouge">~/.m2</code>ï¼‰ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;servers&gt;</span>
    <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;id&gt;</span>ossrh<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username&gt;</span>your-jira-id<span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password&gt;</span>your-jira-pwd<span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div></div>

<p>æ³¨æ„è¿™é‡Œçš„ id å’Œ <code class="highlighter-rouge">snapshotRepository</code> /<code class="highlighter-rouge">repository</code> ä¸­çš„ idï¼Œä»¥åŠ <code class="highlighter-rouge">plugin</code> ä¸­çš„ id éƒ½æ˜¯ç›¸åŒçš„ï¼Œéƒ½ä¸º <strong>ossrh</strong>ã€‚</p>

<h3 id="javadoc-å’Œæºä»£ç ">Javadoc å’Œæºä»£ç </h3>

<p>ä¸ºäº†ç”Ÿæˆ Javadoc å’Œæº jar æ–‡ä»¶ï¼Œéœ€è¦åœ¨ <code class="highlighter-rouge">pom.xml</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.2.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;id&gt;</span>attach-sources<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>jar-no-fork<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.9.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;id&gt;</span>attach-javadocs<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<h3 id="gpg-ç­¾åç»„ä»¶">GPG ç­¾åç»„ä»¶</h3>

<p>Maven GPG æ’ä»¶ä½¿ç”¨ä»¥ä¸‹é…ç½®ä¸ºç»„ä»¶è¿›è¡Œç­¾åã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>maven-gpg-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.5<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;id&gt;</span>sign-artifacts<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>sign<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<p>å¹¶åœ¨ <code class="highlighter-rouge">setting.xml</code> ä¸­é…ç½® gpg çš„è¿è¡Œæ–‡ä»¶å’Œå¯†ç ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>ossrh<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;activation&gt;</span>
        <span class="nt">&lt;activeByDefault&gt;</span>true<span class="nt">&lt;/activeByDefault&gt;</span>
      <span class="nt">&lt;/activation&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;gpg.executable&gt;</span>D:/Work/GnuPG/bin/gpg.exe<span class="nt">&lt;/gpg.executable&gt;</span>
        <span class="nt">&lt;gpg.passphrase&gt;</span>the_pass_phrase<span class="nt">&lt;/gpg.passphrase&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæƒ³è¦å‘å¸ƒæ­£å¼ç‰ˆæœ¬ï¼Œè¿˜éœ€è¦åœ¨ <code class="highlighter-rouge">pom.xml</code> ä¸­é…ç½®é¡¹ç›®åã€æè¿°ã€å¼€å‘è€…ç­‰ä¿¡æ¯ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;name&gt;</span>maven-release-example<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;description&gt;</span>Example project to deploy maven projects.<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;url&gt;</span>https://github.com/seriouszyx/maven-release-example<span class="nt">&lt;/url&gt;</span>
<span class="nt">&lt;licenses&gt;</span>
    <span class="nt">&lt;license&gt;</span>
        <span class="nt">&lt;name&gt;</span>MIT<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;url&gt;</span>https://opensource.org/licenses/MIT<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/license&gt;</span>
<span class="nt">&lt;/licenses&gt;</span>
<span class="nt">&lt;developers&gt;</span>
    <span class="nt">&lt;developer&gt;</span>
        <span class="nt">&lt;name&gt;</span>Yixiang Zhao<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;email&gt;</span>seriouszyx@gmail.com<span class="nt">&lt;/email&gt;</span>
        <span class="nt">&lt;organization&gt;</span>seriouszyx<span class="nt">&lt;/organization&gt;</span>
        <span class="nt">&lt;organizationUrl&gt;</span>https://seriouszyx.com/<span class="nt">&lt;/organizationUrl&gt;</span>
    <span class="nt">&lt;/developer&gt;</span>
<span class="nt">&lt;/developers&gt;</span>
<span class="nt">&lt;scm&gt;</span>
    <span class="nt">&lt;connection&gt;</span>scm:git:https://github.com/seriouszyx/maven-release-example.git<span class="nt">&lt;/connection&gt;</span>
    <span class="nt">&lt;developerConnection&gt;</span>scm:git:https://github.com/seriouszyx/maven-release-example.git<span class="nt">&lt;/developerConnection&gt;</span>
    <span class="nt">&lt;url&gt;</span>https://github.com/seriouszyx/maven-release-example<span class="nt">&lt;/url&gt;</span>
<span class="nt">&lt;/scm&gt;</span>
</code></pre></div></div>

<h2 id="å‘å¸ƒ">å‘å¸ƒ</h2>

<p>æ›´æ”¹ <code class="highlighter-rouge">pom.xml</code> ä¸­çš„ç‰ˆæœ¬å·ä¸º <code class="highlighter-rouge">1.0.0</code> ï¼Œ åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ <code class="highlighter-rouge">mvn clean deploy</code> å³å¯å‘å¸ƒï¼Œå‘å¸ƒæˆåŠŸåç»„ä»¶ä¼šå­˜å‚¨åˆ°ä¸€ä¸ªä¸´æ—¶å­˜å‚¨åº“ä¸­ï¼Œåªå¯¹å›¢é˜Ÿæˆå‘˜å¼€æ”¾ï¼Œå¯ä»¥åœ¨ <a href="https://s01.oss.sonatype.org/">https://s01.oss.sonatype.org/</a> è®¿é—®ï¼Œç‚¹å‡»å³ä¸Šè§’ç™»å½• JIRA çš„è´¦å·ï¼Œæœç´¢åˆšå‘å¸ƒçš„ç»„ä»¶ï¼Œå³å¯æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ã€‚</p>

<p><img src="https://img.seriouszyx.com/202110161035870.png#vwid=2560&amp;vhei=1381" alt="" /></p>

<p>å› ä¸ºä¹‹å‰åœ¨ maven æ’ä»¶ nexus-staging-maven-plugin ä¸­çš„ <code class="highlighter-rouge">autoReleaseAfterClose</code> å±æ€§è®¾ç½®ä¸º true äº†ï¼Œæ‰€ä»¥è‡ªåŠ¨ä¸Šä¼ åˆ° staging repository ï¼Œå¹¶ä¸”è‡ªåŠ¨æ‰§è¡Œäº† close-&gt;release-&gt;drop ä¸‰æ­¥æ›²ï¼Œç­‰å¾…ä¸¤å°æ—¶åå°±å¯ä»¥åœ¨ <a href="https://search.maven.org/">https://search.maven.org</a> æŸ¥åˆ°äº†ã€‚</p>

<p><img src="https://img.seriouszyx.com/202110161035404.png#vwid=2069&amp;vhei=393" alt="" /></p>

<p>åœ¨æ–°å»ºå·¥ç¨‹çš„ <code class="highlighter-rouge">pom.xml</code> ç§æ·»åŠ ä¾èµ–ï¼Œå³å¯ä½¿ç”¨ jar åŒ…ä¸­çš„æ–¹æ³•ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.seriouszyx<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>maven-release-example<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<hr />

<ol>
  <li><a href="https://central.sonatype.org/publish/">The Central Repository Documentation</a></li>
  <li><a href="https://blog.csdn.net/qiaojialin/article/details/77659200">å‘å¸ƒé¡¹ç›®åˆ°ä¸­å¤®åº“çš„ä¸€äº›å¸¸è§é—®é¢˜</a></li>
</ol>

  </div>

  <a class="u-url" href="/2021/publish-to-maven.html" hidden></a>
</article>

<div class="ant-alert mb-0">
  <ul>
    <li>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é‡‡ç”¨<a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">çŸ¥è¯†å…±äº« 3.0 è®¸å¯è¯</a> (<strong>ä¿æŒç½²å</strong>-è‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ)</li>
    <li>å‘è¡¨äº 2021-10-16
    </li>
  </ul>
  
</div>

<div class="page-navigation">
  
  <a class="prev" href="/2021/maven-semantic-release.html">&laquo; ä¸Šä¸€ç¯‡</a>
   
  <a class="next" href="/2021/scanner-analysis-and-detect.html">ä¸‹ä¸€ç¯‡ &raquo;</a>
  
</div><div id="gitalk-container">
</div>
<script>
    var gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'blog',
        owner: 'imageslr',
        admin: ['imageslr'],
        id: md5(location.pathname),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false,  // Facebook-like distraction free mode
        createIssueManually: true,
        pagerDirection: "first",
        perPage: 25,
    })
    gitalk.render('gitalk-container')
</script>
        </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>
    <div class="wrapper">
      <div class="footer-col-wrapper">
        <div class="footer-col">
          <ul class="contact-list">
            <li class="p-name"><a class="black-link" href="https://blog.seriouszyx.com/about.html">
                  éšç§€ 
                </a></li><li>
              <a class="u-email black-link" href="mailto:seriouszyx@gmail.com">seriouszyx@gmail.com</a></li></ul>
        </div>
      </div>
    </div>
    <div class="text-center">
      <a class="text-gray-300 text-sm" href="https://beian.miit.gov.cn">è¾½ICPå¤‡19014015å·</a>
    </div>
  </footer>

  <!-- highlight js -->
  <script src="https://cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-chtml.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } } });
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- gitalk --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
  <script src="/assets/js/md5.min.js"></script><!-- viewerjs -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/viewerjs@1.10.4/dist/viewer.min.css">
  <script src="https://cdn.jsdelivr.net/npm/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script>
    var el = document.getElementById('post');
    if (el) new Viewer(el);
  </script>

  
  <!-- google analytics --><link type="application/atom+xml" rel="alternate" href="https://blog.seriouszyx.com/feed.xml" title="seriouszyx' Blog" /><script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script></body>
</html>